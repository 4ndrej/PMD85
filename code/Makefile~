#
#
#

AVRDUDE= avrdude -V -p m128 -c pony-stk200 -P lpt1
PHP= php
ASM = "c:\mega\small_pmd_128\avrassembler\avrasm32.exe"



games_rom0.asm: games.php 
	$(PHP) -f games.php rom0

games_rom1.asm: games.php
	$(PHP) -f games.php rom1


games_rom2.asm: games.php
	$(PHP) -f games.php rom2

basic1.asm:	games.php basic1.rom
	$(PHP) -f games.php basic1
	
monit1.asm:	games.php monit1.rom
	$(PHP) -f games.php monit1

pmd.asm: pmd.php 8080.asm
	$(PHP) -q pmd.php > pmd.asm

pmd.eep: pmd.hex

pmd.hex: games_rom0.asm games_rom1.asm games_rom2.asm basic1.asm monit1.asm pmd.asm kbd.php macro.asm video.php 
	$(ASM) -fI pmd.asm -o "pmd.hex" -m "pmd.map" -e "pmd.eep" -l "pmd.lst"


flash:	pmd.hex
	$(AVRDUDE) -U flash:w:pmd.hex

eeprom:	pmd.eep
	$(AVRDUDE) -U eeprom:w:pmd.eep


all:	flash eeprom

